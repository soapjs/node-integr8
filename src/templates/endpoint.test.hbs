{{!-- Endpoint Integration Test Template --}}
{{!-- Generated by @soapjs/integr8 --}}

{{#if imports}}
{{#each imports}}
import { {{this}} } from '{{@key}}';
{{/each}}
{{/if}}

{{#if setup}}
// Global setup
beforeAll(async () => {
  {{#if (endsWith configPath ".json")}}
  const config = require('{{relativePath testFilePath configPath}}');
  {{else}}
  const configModule = require('{{relativePath testFilePath configPath}}');
  const config = configModule.default || configModule;
  {{/if}}
  
  await setupEnvironment(config);
});

{{/if}}
{{#if teardown}}
// Global teardown
afterAll(async () => {
  await teardownEnvironment();
});

{{/if}}
describe('{{endpoint.method}} {{endpoint.path}} Integration Tests', () => {
  {{#if (eq endpoint.method "GET")}}
  test('should handle {{endpoint.method}} {{endpoint.path}}', async () => {
    const ctx = getEnvironmentContext();
    const response = await ctx.http.{{lowercase endpoint.method}}('{{endpoint.path}}');
    
    {{#if (eq endpoint.path "/health")}}
    expect(response.status).toBe(200);
    expect(response.data).toHaveProperty('status', 'ok');
    {{else}}
    // TODO: Add proper assertions
    expect(response.status).toBe(200);
    expect(true).toBe(false); // This test needs implementation
    {{/if}}
  });

  {{/if}}
  {{#if (eq endpoint.method "POST")}}
  test('should handle {{endpoint.method}} {{endpoint.path}}', async () => {
    const ctx = getEnvironmentContext();
    const requestData = {
      // TODO: Add request data
    };
    
    const response = await ctx.http.{{lowercase endpoint.method}}('{{endpoint.path}}', requestData);
    
    // TODO: Add proper assertions
    expect(response.status).toBe(201);
    expect(true).toBe(false); // This test needs implementation
  });

  {{/if}}
  {{#if (eq endpoint.method "PUT")}}
  test('should handle {{endpoint.method}} {{endpoint.path}}', async () => {
    const ctx = getEnvironmentContext();
    const requestData = {
      // TODO: Add request data
    };
    
    const response = await ctx.http.{{lowercase endpoint.method}}('{{endpoint.path}}', requestData);
    
    // TODO: Add proper assertions
    expect(response.status).toBe(200);
    expect(true).toBe(false); // This test needs implementation
  });

  {{/if}}
  {{#if (eq endpoint.method "DELETE")}}
  test('should handle {{endpoint.method}} {{endpoint.path}}', async () => {
    const ctx = getEnvironmentContext();
    const response = await ctx.http.{{lowercase endpoint.method}}('{{endpoint.path}}');
    
    // TODO: Add proper assertions
    expect(response.status).toBe(204);
    expect(true).toBe(false); // This test needs implementation
  });
  {{/if}}
  {{#if (eq endpoint.method "PATCH")}}
  test('should handle {{endpoint.method}} {{endpoint.path}}', async () => {
    const ctx = getEnvironmentContext();
    const requestData = {
      // TODO: Add request data
    };
    
    const response = await ctx.http.{{lowercase endpoint.method}}('{{endpoint.path}}', requestData);
    
    // TODO: Add proper assertions
    expect(response.status).toBe(200);
    expect(true).toBe(false); // This test needs implementation
  });

  {{/if}}
});
